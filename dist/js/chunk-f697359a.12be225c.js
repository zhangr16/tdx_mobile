(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f697359a"],{"097f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screenShots"},[r("header",[r("van-icon",{staticClass:"left_arrow",attrs:{name:"arrow-left"},on:{click:function(t){return e.$router.go(-1)}}}),e.isEdit?r("span",[e._v("上传")]):r("span",[e._v("查看")]),e._v("好评截图\n  ")],1),r("main",[r("van-cell-group",[r("van-field",{attrs:{readonly:"",label:"买家旺旺",placeholder:"请输入买家旺旺"},model:{value:e.form.user_ww,callback:function(t){e.$set(e.form,"user_ww",t)},expression:"form.user_ww"}}),r("van-field",{attrs:{readonly:"",label:"订单编号",placeholder:"请输入订单编号"},model:{value:e.form.order_sn,callback:function(t){e.$set(e.form,"order_sn",t)},expression:"form.order_sn"}}),e.isEdit?r("van-cell",{staticClass:"uploads",attrs:{title:"上传截图",label:"（最多3张）"}},[r("van-uploader",{attrs:{"after-read":e.afterRead,"before-delete":e.beforeDel,multiple:"","max-count":3},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1):r("van-cell",{staticClass:"uploads",attrs:{title:"好评截图"}},e._l(e.form.img,function(e,t){return r("img",{key:t,attrs:{src:e,alt:""}})}),0)],1),e.isEdit?r("div",{staticClass:"submit_btn",on:{click:e.handleSubmit}},[e._v("提交评论")]):e._e()],1)])},s=[],a=(r("96cf"),r("3b8d")),i=r("365c"),u={name:"screenShots",components:{},data:function(){return{isEdit:null,fileList:[],form:{user_ww:"",order_sn:"",img:[]}}},mounted:function(){this.$route.query.e&&(this.isEdit=!0),this.getData()},methods:{getData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["l"])({id:this.$route.query.id,type:3});case 2:t=e.sent,t&&200==t.error.errno&&(this.form={user_ww:t.user_ww,order_sn:t.order_sn,img:t.img});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),afterRead:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("img",t.file),e.next=4,Object(i["v"])(r);case 4:n=e.sent,n&&200==n.error.errno&&(this.$toast.success("图片上传成功"),t.url=n.url);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),beforeDel:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["c"])({url:t.url});case 2:if(r=e.sent,!r||200!=r.error.errno){e.next=6;break}return this.$toast.success("图片删除成功"),e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.fileList.map(function(e){t.push(e.url)}),e.next=4,Object(i["l"])({type:2,id:this.$route.query.id,img:t});case 4:r=e.sent,r&&200==r.error.errno&&(this.$toast.success(r.error.usermsg),setTimeout(function(){n.$router.push("/task")},500));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},o=u,c=(r("27ef"),r("2877")),l=Object(c["a"])(o,n,s,!1,null,null,null);t["default"]=l.exports},2516:function(e,t,r){},"27ef":function(e,t,r){"use strict";var n=r("2516"),s=r.n(n);s.a}}]);